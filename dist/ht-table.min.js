/*!
 * angular-ht-ng-table
 * https://github.com/hightest/angular-ng-table
 * Version: 0.0.1 - 2015-03-06T15:51:02.732Z
 * License: 
 */
var app=angular.module("ht.table",["ui.bootstrap"]);app.directive("htTable",function(){return{templateUrl:"ht-table.html",scope:{htTable:"="},controller:["$scope","orderByFilter",function(e,t){function a(e){return{rowClick:n(e,"rowClick"),expand:n(e,"expand"),postSorting:n(e,"postSorting"),checkedRows:n(e,"checked"),init:n(e,"init")}}function n(e,t){return angular.isDefined(e[t])?e[t]:function(){}}function i(){for(var e=0,t=k.fields.length;t>e;e++){var a=k.fields[e];angular.isDefined(a.sort)&&M.push({field:a.value,sort:a.sort}),a.visible=angular.isUndefined(a.visible)}}function l(){if(0!==T.length||!angular.isFunction(C.init)){for(var e=[],a=0,n=M.length;n>a;a++){var i=M[a],l="";l="asc"==i.sort?"+":"-",l+=i.field,e.push(l)}var r=M.length?t(T,e):T,o=k.pagination;angular.isFunction(C.init)&&(C.init(r,o),C.init=null),o.total=r.length,k.data=o.itemsPerPage?r.slice((o.current-1)*o.itemsPerPage,o.current*k.pagination.itemsPerPage):r}}function r(){k.pagination.current=1,l()}function o(e){return D=e,C.rowClick(e)}function s(e){return C.expand(e)}function d(){this.reloadTable()}function g(){return parseInt(k.pagination.total/k.pagination.itemsPerPage)+1}function u(e){return k.selectMultiple&&e.checked||e==D?S:""}function c(e){for(var t=0;t<M.length;t++)if(e.value==M[t].field)return"asc"==M[t].sort?"ht-table-icon-up":"ht-table-icon-down";return""}function p(e){for(var t=0;t<M.length;t++)if(M[t].field==e.value)return t;return null}function b(e,t){var a=t.shiftKey,n=p(e),i={};if(i=null===n?{field:e.value,sort:"asc"}:M[n],null!==n){var r=i.sort;"asc"==r?(M[n].sort="desc",a||(M=[M[n]])):a?M.splice(n,1):M=[]}else a?M.push(i):M=[i];C.postSorting(M,k.pagination),l()}function f(){for(var e=1,t=0,a=k.fields.length;a>t;t++){var n=k.fields[t];n.visible&&e++}return k.selectMultiple&&e++,e}function h(){var e=m();C.checkedRows(e)}function v(){for(var e=0,t=k.fields.length;t>e;e++)if(angular.isDefined(k.fields[e].type)&&"sum"==k.fields[e].type)return!0;return!1}function m(){for(var e=[],t=0,a=k.data.length;a>t;t++){var n=k.data[t];angular.isDefined(n.checked)&&n.checked&&e.push(n)}return e}function P(e){var t=0,a=m(),n=a.length;n||(a=T);for(var i=0;n>i;i++){var l=a[i];t+=l[e]}return t}function w(e,t){for(var a=e.split("."),n=t,i=0,l=a.length;l>i;i++){var r=a[i];if(null===n||!n.hasOwnProperty(r))return"";n=n[r]}return n}function y(e){return"template"==e.type}var k=this,x=e.htTable,C=a(x);k.id=angular.isDefined(x.id)?x.id:"table",k.class=angular.isDefined(x.class)?x.class:[],k.selectMultiple=angular.isDefined(x.selectMultiple)?x.selectMultiple:!1;var S=angular.isDefined(x.active)?x.active:"",T=x.data,D=null;k.fields=x.fields,k.pagination={total:0,current:1,itemsPerPage:10};var M=[];k.data=T,k.reloadTable=l,k.expand=o,k.show=s,k.pageChanged=d,k.pages=g,k.rowStyle=u,k.getFieldClass=c,k.findField=p,k.changeSorting=b,k.countColumns=f,k.checkedChange=h,k.hasSum=v,k.getCheckedElements=m,k.sum=P,k.getValue=w,k.isTemplate=y,k.updatePagination=r,i(),l(),e.$watch("htTable",function(e,t){e!=t&&(T=e.data,l())},!0)}],controllerAs:"table"}}),angular.module("ht.table").run(["$templateCache",function(e){e.put("ht-table.html",'<div class="table-responsive"><table class="table table-bordered" id="{{table.id}}" ng-class="table.class"><thead><tr><th><div dropdown="" class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" dropdown-toggle=""><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></button><ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation()"><li ng-repeat="field in table.fields" ng-if="!table.isTemplate(field)"><label><input type="checkbox" ng-model="field.visible">{{field.name}}</label></li></ul></div></th><th ng-if="table.selectMultiple"></th><th ng-repeat="field in table.fields" ng-if="field.visible" ng-click="table.changeSorting(field, $event)" ng-class="table.getFieldClass(field)" style="cursor:pointer">{{field.name}}</th></tr></thead><tbody><tr ng-repeat-start="row in table.data" ng-class="table.rowStyle(row)"><td>{{(table.pagination.current - 1) * table.pagination.itemsPerPage + $index + 1}}.</td><th scope="row" ng-if="table.selectMultiple"><input type="checkbox" ng-model="row.checked" ng-change="table.checkedChange()"></th><td ng-repeat="field in table.fields" ng-if="field.visible" ng-click="table.expand(row)"><div ng-if="!table.isTemplate(field)">{{table.getValue(field.value, row)}}</div><div ng-if="table.isTemplate(field)" ng-include="field.templateUrl"></div></td></tr><tr ng-repeat-end="" ng-if="table.show(row)"><td colspan="{{table.countColumns()}}"><div ui-view=""></div></td></tr></tbody><tfoot ng-if="table.hasSum()"><tr><td>&nbsp;</td><td ng-if="table.selectMultiple">&nbsp;</td><td ng-repeat="field in table.fields" ng-if="field.visible"><span ng-if="field.type == \'sum\'">Suma: {{table.sum(field.value) | number:2}}</span></td></tr></tfoot></table></div><div class="row"><div class="col-xs-6" ng-if="table.pages() > 1"><pagination total-items="table.pagination.total" ng-model="table.pagination.current" ng-change="table.pageChanged()" max-size="5" items-per-page="table.pagination.itemsPerPage" previous-text="&laquo;" next-text="&raquo;"></pagination></div><div class="btn-group col-xs-6" ng-if="table.pagination.total > 10"><label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="10">10</label> <label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="25">25</label> <label class="btn btn-primary" ng-if="table.pagination.total > 25" ng-change="table.updatePagination()" ng-model="table.pagination.itemsPerPage" btn-radio="50">50</label> <label class="btn btn-primary" ng-if="table.pagination.total > 50" ng-change="table.updatePagination()" ng-model="table.pagination.itemsPerPage" btn-radio="100">100</label> <label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="0">Wszystkie</label></div></div>')}]);