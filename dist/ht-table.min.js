/*!
 * angular-ht-ng-table
 * https://github.com/hightest/angular-ng-table
 * Version: 0.0.1 - 2015-04-14T09:48:31.350Z
 * License: 
 */
var app=angular.module("ht.table",["ui.bootstrap","naturalSort"]);app.directive("htTable",function(){return{templateUrl:"ht-table.html",scope:{htTable:"="},controller:["$scope","$filter","$rootScope",function(e,t,n){function a(e){return{rowClick:i(e,"rowClick"),expand:i(e,"expand"),postSorting:i(e,"postSorting"),checkedRows:i(e,"checked"),init:i(e,"init")}}function i(e,t){return angular.isDefined(e[t])?e[t]:function(){}}function l(){for(var e=0,t=C.fields.length;t>e;e++){var n=C.fields[e];angular.isDefined(n.sort)&&V.push({field:n.value,sort:n.sort}),angular.isUndefined(n.visible)&&(n.visible=!0)}}function r(){if(0!==M.length||!angular.isFunction(T.init)){for(var e=[],n=0,a=V.length;a>n;n++){var i=V[n],l="";l="asc"==i.sort?"+":"-",l+=i.field,e.push(l)}var r=V.length?t("natural")(M,e):M,o=C.pagination;angular.isFunction(T.init)&&(T.init(r,o),T.init=null),o.total=r.length,C.data=o.itemsPerPage?r.slice((o.current-1)*o.itemsPerPage,o.current*C.pagination.itemsPerPage):r}}function o(){C.pagination.current=1,r()}function u(e){return A=e,T.rowClick(e)}function s(e){return T.expand(e)}function c(){this.reloadTable()}function d(){return parseInt(C.pagination.total/C.pagination.itemsPerPage)+1}function g(e){return C.selectMultiple&&e.checked||e==A?$:""}function f(e){for(var t=0;t<V.length;t++)if(e.value==V[t].field)return"asc"==V[t].sort?"ht-table-icon-up":"ht-table-icon-down";return""}function p(e){for(var t=0;t<V.length;t++)if(V[t].field==e.value)return t;return null}function b(e,t){var n=t.shiftKey,a=p(e),i={};if(i=null===a?{field:e.value,sort:"asc"}:V[a],null!==a){var l=i.sort;"asc"==l?(V[a].sort="desc",n||(V=[V[a]])):n?V.splice(a,1):V=[]}else n?V.push(i):V=[i];T.postSorting(V,C.pagination),r()}function h(){for(var e=1,t=0,n=C.fields.length;n>t;t++){var a=C.fields[t];a.visible&&e++}return C.selectMultiple&&e++,e}function v(){D=!0;var e=P();T.checkedRows(e)}function m(){for(var e=0,t=C.fields.length;t>e;e++)if(angular.isDefined(C.fields[e].type)&&"sum"==C.fields[e].type)return!0;return!1}function P(){for(var e=[],t=0,n=C.data.length;n>t;t++){var a=C.data[t];angular.isDefined(a.checked)&&a.checked&&e.push(a)}return e}function y(){for(var e=0,t=C.data.length;t>e;e++)C.data[e].checked=!1}function w(e){var t=0,n=P();n.length||(n=M);for(var a=n.length,i=0;a>i;i++){var l=n[i];t+=l[e]}return t}function S(e,n){for(var a=e.value,i=a.split("."),l=n,r=0,o=i.length;o>r;r++){var u=i[r];if(null===l||!l.hasOwnProperty(u))return"";l=l[u]}return angular.isDefined(e.filter)&&(l=t(e.filter)(l)),l}function k(e){return"template"==e.type}var C=this,x=e.htTable;x.reset=o,x.reload=r,x.clearSelect=y;var T=a(x),D=!1;C.id=angular.isDefined(x.id)?x.id:"table",C.class=angular.isDefined(x.class)?x.class:[],C.selectMultiple=angular.isDefined(x.selectMultiple)?x.selectMultiple:!1;var $=angular.isDefined(x.active)?x.active:"",M=x.data,A=null;C.fields=x.fields,C.pagination={total:0,current:1,itemsPerPage:10};var V=[];C.data=M,C.reloadTable=r,C.expand=u,C.show=s,C.pageChanged=c,C.pages=d,C.rowStyle=g,C.getFieldClass=f,C.findField=p,C.changeSorting=b,C.countColumns=h,C.checkedChange=v,C.hasSum=m,C.getCheckedElements=P,C.sum=w,C.getValue=S,C.isTemplate=k,C.updatePagination=o,l(),r(),e.$watch("htTable",function(e,t){return e!=t?D?(D=!1,void 0):(M=e.data,void 0):void 0},!0),n.$on("ht.table.refresh",o)}],controllerAs:"table"}}).filter("natural",["$parse","naturalService",function(e,t){function n(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function a(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function i(e,t,n){var a=[];return angular.forEach(e,function(e,i,l){a.push(t.call(n,e,i,l))}),a}function l(e){if(null===e||a(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:angular.isString(e)||angular.isArray(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}var r=[].slice;return function(a,o,u){function s(e,t){for(var n=0;n<o.length;n++){var a=o[n](e,t);if(0!==a)return a}return 0}function c(e,t){return n(t)?function(t,n){return e(n,t)}:e}function d(e,n){var a=typeof e,i=typeof n;return a==i?(angular.isDate(e)&&angular.isDate(n)&&(e=e.valueOf(),n=n.valueOf()),"string"==a&&(e=t.naturalValue(e.toLowerCase()),n=t.naturalValue(n.toLowerCase())),e===n?0:n>e?-1:1):i>a?-1:1}return l(a)?(o=angular.isArray(o)?o:[o],0===o.length&&(o=["+"]),o=i(o,function(t){var n=!1,a=t||identity;if(angular.isString(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return c(function(e,t){return d(e,t)},n);if(a=e(t),a.constant){var i=a();return c(function(e,t){return d(e[i],t[i])},n)}}return c(function(e,t){return d(a(e),a(t))},n)}),r.call(a).sort(c(s,u))):a}}]),/*!
 * Copyright 2013 Phil DeJarnett - http://www.overzealous.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
angular.module("naturalSort",[]).factory("naturalService",["$locale",function(e){"use strict";var t={},n=function(e){return"00000000000000000000".slice(e.length)},a=function(e){return null===e||void 0===e?"":""+e},i="M"===e.DATETIME_FORMATS.shortDate.charAt(0),l=function(e){return a(e).replace(/(\d\d?)[-\/\.](\d\d?)[-\/\.](\d{4})/,function(e,t,n,a){var l=n;return i?Number(t)>12&&(n=t,t=l):Number(n)<13&&(n=t,t=l),a+"-"+t+"-"+n})},r=function(e){return e.replace(/(\d+)((\.\d+)+)?/g,function(e,t,a,i){return a!==i?e.replace(/(\d+)/g,function(e){return n(e)+e}):(a=a||".0",n(t)+t+a+n(a))})},o=function(e){return t[e]?t[e]:(t[e]=r(l(e)),t[e])};return{naturalValue:o,naturalSort:function(e,t){return e=natVale(e),t=o(t),t>e?-1:e>t?1:0}}}]).run(["$rootScope","naturalService",function(e,t){"use strict";e.natural=function(e){return function(n){return t.naturalValue(n[e])}}}]),angular.module("ht.table").run(["$templateCache",function(e){e.put("ht-table.html",'<div class="table-responsive"><table class="table table-bordered" id="{{table.id}}" ng-class="table.class"><thead><tr><th><div dropdown="" class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" dropdown-toggle=""><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></button><ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation()"><li ng-repeat="field in table.fields" ng-if="!table.isTemplate(field)"><label><input type="checkbox" ng-model="field.visible">{{field.name}}</label></li></ul></div></th><th ng-if="table.selectMultiple"></th><th ng-repeat="field in table.fields" ng-if="field.visible" ng-click="table.changeSorting(field, $event)" ng-class="table.getFieldClass(field)" style="cursor:pointer">{{field.name}}</th></tr></thead><tbody><tr ng-repeat-start="row in table.data" ng-class="table.rowStyle(row)"><td>{{(table.pagination.current - 1) * table.pagination.itemsPerPage + $index + 1}}.</td><th scope="row" ng-if="table.selectMultiple"><input type="checkbox" ng-model="row.checked" ng-change="table.checkedChange()"></th><td ng-repeat="field in table.fields" ng-if="field.visible" ng-click="table.expand(row)"><div ng-if="!table.isTemplate(field)">{{table.getValue(field, row)}}</div><div ng-if="table.isTemplate(field)" ng-click="$event.stopPropagation()" ng-include="field.templateUrl"></div></td></tr><tr ng-repeat-end="" ng-if="table.show(row)"><td colspan="{{table.countColumns()}}"><div ui-view=""></div></td></tr></tbody><tfoot ng-if="table.hasSum()"><tr><td>&nbsp;</td><td ng-if="table.selectMultiple">&nbsp;</td><td ng-repeat="field in table.fields" ng-if="field.visible"><span ng-if="field.type == \'sum\'">Suma: {{table.sum(field.value) | number:2}}</span></td></tr></tfoot></table></div><div class="row"><div class="col-xs-6" ng-if="table.pages() > 1"><pagination total-items="table.pagination.total" ng-model="table.pagination.current" ng-change="table.pageChanged()" max-size="5" items-per-page="table.pagination.itemsPerPage" previous-text="&laquo;" next-text="&raquo;"></pagination></div><div class="btn-group col-xs-6" ng-if="table.pagination.total > 10"><label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="10">10</label> <label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="25">25</label> <label class="btn btn-primary" ng-if="table.pagination.total > 25" ng-change="table.updatePagination()" ng-model="table.pagination.itemsPerPage" btn-radio="50">50</label> <label class="btn btn-primary" ng-if="table.pagination.total > 50" ng-change="table.updatePagination()" ng-model="table.pagination.itemsPerPage" btn-radio="100">100</label> <label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="0">Wszystkie</label></div></div>')}]);